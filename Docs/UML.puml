@startuml


package controller <<Folder>> #lime{

    class MovieController{
    + MovieService movieService
    + ResponseEntity<Movie> movieByID(@PathVariable Long movieId)
    + ResponseEntity<Health> health()
    }

}


package model <<Folder>> #burlywood{

  class Movie{
  - Long id;
  - String original_title;
  - String release_date;
  - String overview;
    }

}

package repository <<Folder>> #violet {

  interface MovieRepository {

  }

}

package service <<Folder>> #red{

  interface MovieService{
  +Movie getMovieById(Long movieId)
  }
  class MovieServiceImpl{
    + Movie getMovieById(Long movieId)
  }

}
Interface CrudRepository<movie,ID>{

}

class ExternalMovieAPI{

    }

package exception <<Folder>> #brown{
    class ErrorResponse{
        - LocalDateTime timestamp;
        - String message;
    }
    class MovieNotFoundException extends RunTimeException{

    }
    class MyMovieErrorHandler extends DefaultResponseErrorHandler{
     + handleError(ClientHttpResponse response)
    }

    class ApplicationExceptionHandler{
        + ResponseEntity<Object> handleMovieNotFoundException(MovieNotFoundException e)
    }
}

MovieController <-right-> MovieServiceImpl
MovieRepository -left-> CrudRepository

MovieServiceImpl -- MovieService
MovieServiceImpl -up- MovieRepository
MovieRepository -right- Movie
MovieServiceImpl -right- ExternalMovieAPI
@enduml